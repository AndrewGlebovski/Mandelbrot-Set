# Mandelbrot Set


## Цель


Научиться оптимизировать однотипные вычисления на CPU с помощью SIMD.


## Введение


Множество Мандельброта - является одним из наиболее известных фракталов, а также интересной задачей с точки зрения оптимизации, поскольку цвет каждого пикселя вычисляется по рекуррентной формуле.


## Ход работы


Сначала будем вычислять цвет каждого "наивным" образом, т.е. по одному пикселю за итерацию внутреннего цикла. Далее воспользуемся SIMD и будем считать по 8 пикселей за итерацию (Команды AVX2 используют регистры на 256 бит, значит в один регистр вмещается 8 float чисел). Замерим и сравним FPS в обоих случаях.


## Результат


**Особенности исполнения**
- Все измерения производились с опцией -O3 компилятора gcc, а также набором инструкций AVX2.
- Для того, чтобы уменьшить влияние факторов, не связанных с вычислением множества, я вычисляю каждый пиксель по 100 раз после чего умножаю полученный FPS на 100.
- Компьютер был подключен к сети, замеры производились в одно время (чтобы избежать искажения FPS из-за троттлинга CPU)

Средний FPS, полученный измерением "на глаз":

| SIMD | FPS |
| ---- | --- |
| Off  | 8   |
| On   | 56  |

Коэффициент ускорения:

|                | Коэффициент ускорения |
| -------------- | --------------------- |
| Теоретический  | 8                     |
| Практический   | 7                     |


## Вывод


SIMD позволяют добиться высоких коэффициентов ускорения за счет исполнения нескольких итераций цикла одновременно, однако для этого требуется использовать специальные ассемблерные вставки (интринсики), так как компилятор не способен сам выполнить такую оптимизацию.
